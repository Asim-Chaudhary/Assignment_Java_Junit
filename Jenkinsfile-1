pipeline 
{
    agent none

    tools {
            maven 'Maven_2'
            dockerTool 'Docker_1'
    }

    stages 
    {
        stage('Build') 
        {   
            agent {
                    docker {image 'openjdk:17-jdk'}
                }
            steps 
                {
                    script{ 
                        git branch : 'main', url: 'https://github.com/Asim-Chaudhary/Assignment_Java_Junit.git'
                        //docker.image('openjdk:17-jdk').inside
                       { sh 'mvn clean compile' }
                        }
                
                }

        }

        stage('Test') 
        {
            steps 
                {
                sh 'mvn test'
                }

        }        

        stage('Deploy') 
        {
            steps 
                {
                echo 'Deploy App'
                } 

        }               
    }
}
